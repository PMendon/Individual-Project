PROC IMPORT DATAFILE='C:\Users\pmendon\Downloads\pikachu.csv' DBMS=CSV OUT=ashline;
	GETNAMES=YES;
RUN;

proc means data=ashline n nmiss;
run;

title 'Primary Analysis Missing';
proc means data=ashline n nmiss;
var gender clientage fagerstrom referral q10 ;
run;

*asthma
hypertension
cancer
copd
diabetes
heartdisease;

title 'Creating Comorbid Disease Variable';
data ashline2;
set ashline; 
CC=0; 
ARRAY disease {6} asthma hypertension cancer copd diabetes heartdisease; 
DO i=1 to 6; 
	if disease{i} = 1 THEN CC=CC+1; 
END; 
drop i; 
RUN;  

/*create NRT stratification variable*/
data ashline3;
set ashline2;
	NumInterventions='.';
	if medication=0 and coaching_Calls_beforeFU =0 then numinterventions =0;
	if medication=1 and coaching_Calls_beforeFU =0 then numinterventions =1;
	if medication=1 and coaching_Calls_beforeFU =>1 and coaching_Calls_beforeFU <=4 then numinterventions=2;
	if medication=1 and coaching_Calls_beforeFU =>5 then numinterventions=3;
	if medication=0 and coaching_Calls_beforeFU =>1 and coaching_Calls_beforeFU <=4 then numinterventions=4;
	if medication=0 and coaching_Calls_beforeFU =>5 then numinterventions=5;
run;

proc means data=ashline3 n nmiss;
class NumInterventions;
run;	

proc means data=ashline3 n nmiss;
var quit30;
run;

*http://ndri.curtin.edu.au/btitp/documents/Fagerstrom_test.pdf;
*Categorize Fagerstorm;
data ashline4;
set ashline3;
	FagerstromC='0'; 
	if fagerstrom =0 then FagerstromC= 0; 
	if fagerstrom >= 1 and fagerstrom <=2 then FagerstromC= 1; 
	if fagerstrom >= 3 and fagerstrom <=4 then FagerstromC= 2; 
	if fagerstrom >= 5 and fagerstrom <=7 then FagerstromC= 3;
	if fagerstrom >8 then FagerstromC= 4;
	if fagerstrom = '.' then FagerstromC = '.'; 
run;

DATA ashline5; 
	set ashline4; 
		if clientage=0 then clientage='.'; 
RUN; 

data ashline6;
	set ashline5;
	household=.;
	if q10= 0 then household=0;
	if q10= 1 then household=1;
	if q10= 99 then household=1;
	run;

/*Variable list
gender
clientage
household - do others smoke at home (no=0, yes=1)
fagerstromC - nicotine dependence category
cc - number of comorbidities
medication - NRT use
referral - proactive or passive referral
NumInternventions - Categorical of interventions utilized NRT use w/coaching calls;*/

/*Continuous variables
Clientage
cc
*/
/*Categorical variables
gender
smoke_home_where
FagerstormC 
medication
referral
NumInterventions
;*/
